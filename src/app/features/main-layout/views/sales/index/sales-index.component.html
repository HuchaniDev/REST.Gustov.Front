<div class="flex flex h-full gap-1 select-none overflow-hidden">
    <div class="flex-1 h-full flex-col xl:px-6 py-2 overflow-hidden gap-2">
        <div class="w-full flex items-center justify-between gap-2 min-w-96 h-12 lg:h-16 px-4 bg-white rounded-[4px] shadow-sm ">
            <div class="flex flex-col gap-1">
                <h1 class="text-lg leading-none select-none font-bold" title="">
                    VENTAS
                </h1>
                <span class="hidden text-xs leading-none select-none lg:block text-gray-400">
                    Realiza tus ventas aqui
                </span>
            </div>
            <div class="flex gap-2 400 w-80 min-w-40">
                <input
                        [(ngModel)]="searchTerm"
                        type="text" app-input class="w-full" placeholder=" Buscar ej: silpancho">
                <button
                        class="text-sm text-white bg-orange-600 rounded-[4px] px-1 h-8 flex justify-center items-center gap-2 cursor-pointer"
                        (click)="getItems()"
                        >
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z" />
                    </svg>
                </button>
            </div>
        </div>

        <div class="flex items-center h-16 gap-5">
            @for (category of categories; track category.id) {
                <div class="flex items-center rounded-md h-8 w-fit px-4 font-semibold cursor-pointer border"
                     [ngClass]="{
                        'bg-white text-slate-600 border-orange-200': category.id !== categorySelectedId(),
                        'bg-orange-600 text-white border-orange-500': category.id === categorySelectedId()
                     }"
                     (click)="selectedCategory(category.id)">
                    <span>{{category.name|titlecase}}</span>
                </div>
            }
        </div>

        <div class="flex-1 h-full overflow-y-auto rounded-md ">
            <div class="h-fit grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-2">
<!--                @for (category of categoriesItems ; track $index) {-->
                    @for(item of categoriesItems; track item.id){
                        <div class="relative bg-white h-80 p-2 rounded-lg shadow">
                            <div class="h-52 w-full overflow-hidden rounded-md">
                                <img
                                        [src]="item.imageUrl"
                                        alt="Imagen de {{item.name}}"
                                        class="w-full h-full object-cover"
                                >
                            </div>

                            <div class="mt-2 p-2">
                                <h3 class="font-semibold text-gray-800">{{ item.name|titlecase }}</h3>
                                <p class="text-sm text-gray-600">Precio: {{ item.price | currency:'USD' }}</p>
                                <div class="flex flex justify-end items-center gap-1">
                                    <span class="text-sm text-gray-600" >Stock:</span>
                                    <span class="px-2 text-lg font-semibold rounded-md border"
                                          [ngStyle]="{'border-color': getStockColor(item.stock), 'color': getStockColor(item.stock)}">
                                          {{item.stock}}
                                    </span>

                                </div>
                            </div>
                            @if (item.stock>0) {
                                <div class="absolute top-3 right-3 rounded-xl p-2 bg-white/80 shadow"
                                (click)="addOrderItem(item)">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z" />
                                    </svg>
                                </div>
                            }
                        </div>
<!--                    }@empty {-->
<!--                        <div class="">no hay items preparados para esta categoria</div>-->
<!--                    }-->
                } @empty {
                    <div class="">no hay items preparados para esta categoria</div>
                }
            </div>
        </div>
    </div>

    <div class="max-w-96 w-96 min-w-10 flex flex-col py-2 bg-white rounded-[4px] shadow-sm gap-2 overflow-hidden px-2 py-2">

        <div class="h-10 text-lg font-bold">Pedido Actual</div>
        <div class="flex-1 flex flex-col gap-3 overflow-y-auto p-1">
            @for (item of orderItems; track $index) {
                <div class="relative px-1 flex items-center gap-3 min-h-20 bg-gray-50 shadow rounded-md">
                    <div class="h-18 w-18 overflow-hidden rounded-md">
                        <img
                                [src]="item.imageUrl"
                                alt="Imagen de {{item.name}}"
                                class="w-full h-full object-cover"
                        >
                    </div>
                    <div class="flex-1 flex flex-col justify-between h-full">
                        <div class="pt-2">
                            <span class="flex font-semibold text-md leading-none pr-10">{{item.name|titlecase}} test de lago de test de nombre</span>
                        </div>
                        <div class="flex justify-between w-full pr-2">
                            <div class="text-lg text-orange-500 font-semibold">{{ item.subTotal | currency:'USD' }}</div>
                            <div class="flex">
                                <button class="cursor-pointer size-6 rounded-lg flex items-center justify-center bg-orange-500 text-white disabled:bg-orange-200 disabled:cursor-not-allowed"
                                        [disabled]="!isStockValid(item.id)"
                                (click)="incrementItem(item)">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5">
                                        <path d="M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z" />
                                    </svg>
                                </button>
                                <span class="w-10 text-center">{{item.quantity}}</span>
                                <button class="cursor-pointer size-6 rounded-lg flex items-center justify-center bg-orange-500 text-white disabled:bg-orange-200 disabled:cursor-not-allowed"
                                        [disabled]="item.quantity===1"
                                (click)="decrementItem(item)">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5">
                                        <path fill-rule="evenodd" d="M4 10a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H4.75A.75.75 0 0 1 4 10Z" clip-rule="evenodd" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="absolute top-1 right-2 rounded-xl p-1 bg-white/80 shadow"
                    (click)="deleteOrderItem(item)">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5">
                            <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
                        </svg>
                    </div>
                </div>
            }
        </div>
        <div class="flex flex-col justify-between gap-2 py-2 h-44 border-t-2 border-dashed">
            <div class="flex justify-between bg-gray-100 p-8 rounded-md">
                <span class="text-xl font-semibold text-gray-500">Total</span>
                <span class="text-xl font-bold text-gray-700">{{ getTotal() | currency:'USD' }}</span>
            </div>
            <button
                    class="text-sm text-white bg-orange-600 rounded-[4px] px-1 h-12 flex justify-center items-center gap-2 cursor-pointer"
                    (click)="saveSale()">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5">
                    <path fill-rule="evenodd" d="M1 4a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4Zm12 4a3 3 0 1 1-6 0 3 3 0 0 1 6 0ZM4 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm13-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM1.75 14.5a.75.75 0 0 0 0 1.5c4.417 0 8.693.603 12.749 1.73 1.111.309 2.251-.512 2.251-1.696v-.784a.75.75 0 0 0-1.5 0v.784a.272.272 0 0 1-.35.25A49.043 49.043 0 0 0 1.75 14.5Z" clip-rule="evenodd" />
                </svg>
                <h1 class="text-white text-nowrap">Continuar con el pago</h1>
            </button>
        </div>

    </div>
</div>