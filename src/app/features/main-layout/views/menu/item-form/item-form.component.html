<div>
    <app-loader
            [isLoading]="isProcessing()"
            [message]="message()"
    >
    </app-loader>
    <dialog-header [titleHeader]="(itemId? 'Editar': 'Nuevo')+': Item'"
                   (onClose)="close(false)"
    ></dialog-header>
    <div>
        <form [formGroup]="formGroup" class="">

            <div class="p-2 lg:p-4 flex flex-col gap-3">
                <div class="flex gap-5">
                    <div class="flex-1">
                        <label for="">Nombre</label>
                        <input
                                formControlName="name"
                                type="text" app-input useIcon="false" class="w-full p-2 border border-gray-300 rounded-lg" placeholder=" ej: Postres">

                        @if (formGroup.get('name')?.hasError('required') && formGroup.get('name')?.touched) {
                            <div class="text-red-500 text-xs">Este campo es requerido</div>
                        }

                    </div>
                    <div class="w-36">
                        <label for="">Precio</label>
                        <div class="flex items-center gap-2">
                            <input
                                    formControlName="price"
                                    step="0.01"
                                    min="0"
                                    type="number" app-input useIcon="false" class="relative w-full p-2 border border-gray-300 rounded-lg" placeholder=" ej: 50.00">
                            <span class="absolute right-5">Bs.</span>
                        </div>

                        @if (formGroup.get('price')?.hasError('required') && formGroup.get('price')?.touched) {
                            <div class="text-red-500 text-xs">El precio es requerido</div>
                        }
                        @if (formGroup.get('price')?.hasError('pattern') && formGroup.get('price')?.touched) {
                            <div class="text-red-500 text-xs">Solo números con dos digitos despues del punto (ej.: 10.00)</div>
                        }
                    </div>
                </div>

                <div class="flex gap-5">
                    <div class="flex-1">
                        <label for="">Imagen</label>
                        <input
                                formControlName="imageUrl"
                                type="text" app-input useIcon="false" class="w-full p-2 border border-gray-300 rounded-lg" placeholder=" ej: https://....">

                        @if (formGroup.get('imageUrl')?.hasError('required') && formGroup.get('imageUrl')?.touched) {
                            <div class="text-red-500 text-xs">La imagen es requerida</div>
                        }
                    </div>
                    <div class="w-36">
                        <label for="">Stock</label>
                        <div class="flex items-end gap-2">
                            <input
                                    formControlName="stock"
                                    type="number" app-input useIcon="false" class="w-full p-2 border border-gray-300 rounded-lg" placeholder=" ej: 15">
                        </div>
                        @if (formGroup.get('stock')?.hasError('required') && formGroup.get('stock')?.touched) {
                            <div class="text-red-500 text-xs">El precio es requerido</div>
                        }
                        @if (formGroup.get('stock')?.hasError('min') && formGroup.get('stock')?.touched) {
                            <div class="text-red-500 text-xs">Solo numeros positivos</div>
                        }
                    </div>
                </div>
                <div class="flex-1">

                </div>
                <div id="description" class="">
                    <label for="">Descripción</label>
                    <textarea
                            formControlName="description"
                            app-input
                            class="2 h-40 p-2 border resize-none border-gray-300 rounded-lg "
                            placeholder="Escribe aquí...">
                    </textarea>
                </div>
                <div class="flex justify-between gap-5" >
                    <div>
                    </div>
                    <div class="flex justify-end gap-5">
                        <button
                                type="button"
                                primary-button
                                [disabled]="!formGroup.valid || isProcessing()"
                                (click)="save()">

                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6 hidden md:block">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M5.25 14.25h13.5m-13.5 0a3 3 0 0 1-3-3m3 3a3 3 0 1 0 0 6h13.5a3 3 0 1 0 0-6m-16.5-3a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3m-19.5 0a4.5 4.5 0 0 1 .9-2.7L5.737 5.1a3.375 3.375 0 0 1 2.7-1.35h7.126c1.062 0 2.062.5 2.7 1.35l2.587 3.45a4.5 4.5 0 0 1 .9 2.7m0 0a3 3 0 0 1-3 3m0 3h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Zm-3 6h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Z" />
                            </svg>
                            Guardar
                        </button>
                        <button type="button" default-button (click)="close(false)">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6 hidden md:block">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                            </svg>
                            Cancelar
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>